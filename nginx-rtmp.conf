# Nginx RTMP Configuration
# Place this in /usr/local/nginx/conf/nginx.conf or include it in your main config

worker_processes 1;
events {
    worker_connections 4096;
}

# RTMP configuration
rtmp {
    server {
        listen 1935;
        chunk_size 4096;
        
        application live {
            live on;
            record off;
            
            # Allow publishing from anywhere (adjust for production)
            allow publish all;
            
            # Allow playing from anywhere
            allow play all;
            
            # Optional: Authentication
            # on_publish http://localhost:8080/auth;
            
            # Optional: Recording
            # record all;
            # record_path /tmp/recordings;
            # record_unique on;
        }
    }
}

# HTTP configuration for serving HLS (optional, Flask handles this)
http {
    server {
        listen 8081;
        
        location /hls {
            # Serve HLS files
            types {
                application/vnd.apple.mpegurl m3u8;
                video/mp2t ts;
            }
            root /tmp;
            add_header Cache-Control no-cache;
            add_header Access-Control-Allow-Origin *;
        }
    }
}

